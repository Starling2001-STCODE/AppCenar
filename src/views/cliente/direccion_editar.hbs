<div class="d-flex justify-content-between align-items-center mb-3">
    <button class="btn btn-outline-primary d-inline-flex align-items-center" type="button" data-bs-toggle="offcanvas"
        data-bs-target="#{{sidebarOffcanvasId}}" aria-controls="{{sidebarOffcanvasId}}">
        <i class="bi bi-list me-2"></i>
        Menú
    </button>

    {{#if currentUser}}
    <div class="text-end">
        <div class="fw-semibold">
            {{currentUser.nombre}}
        </div>
        <div class="small text-muted">
            {{currentUser.email}}
        </div>
    </div>
    {{/if}}
</div>

<div class="offcanvas offcanvas-start" tabindex="-1" id="{{sidebarOffcanvasId}}"
    aria-labelledby="{{sidebarOffcanvasId}}Label">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="{{sidebarOffcanvasId}}Label">
            {{sidebar.title}}
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
        {{#if currentUser}}
        <div class="mb-3 pb-3 border-bottom d-flex align-items-center gap-2">
            <div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center"
                style="width: 40px; height: 40px;">
                <i class="bi bi-person"></i>
            </div>
            <div>
                <div class="fw-semibold">{{currentUser.nombre}}</div>
                <div class="small text-muted">{{currentUser.email}}</div>
            </div>
        </div>
        {{/if}}

        {{> sidebar sidebar}}
    </div>
</div>

<div class="mt-3">
    <div class="row justify-content-center">
        <div class="col-12 col-md-8 col-lg-6">
            <div class="card">
                <div class="card-body">
                    <h1 class="h5 mb-3">
                        Editar dirección
                    </h1>
                    <p class="text-muted small mb-4">
                        Actualiza los datos de tu dirección seleccionada.
                    </p>

                    <form method="POST" action="/cliente/direcciones/{{direccion.id}}/editar">
                        <div class="mb-3">
                            <label for="alias" class="form-label">Alias (opcional)</label>
                            <input type="text" id="alias" name="alias"
                                class="form-control {{#if errors.alias}}is-invalid{{/if}}"
                                value="{{direccion.alias}}" />
                            {{#if errors.alias}}
                            <div class="invalid-feedback">
                                {{errors.alias.msg}}
                            </div>
                            {{/if}}
                        </div>
                        <div class="mb-3">
                            <label for="linea1" class="form-label">Dirección</label>
                            <input type="text" id="linea1" name="linea1"
                                class="form-control {{#if errors.linea1}}is-invalid{{/if}}" value="{{direccion.linea1}}"
                                required />
                            {{#if errors.linea1}}
                            <div class="invalid-feedback">
                                {{errors.linea1.msg}}
                            </div>
                            {{/if}}
                        </div>
                        <div class="mb-3">
                            <label for="referencia" class="form-label">Referencia (opcional)</label>
                            <textarea id="referencia" name="referencia"
                                class="form-control {{#if errors.referencia}}is-invalid{{/if}}"
                                rows="2">{{direccion.referencia}}</textarea>
                            {{#if errors.referencia}}
                            <div class="invalid-feedback">
                                {{errors.referencia.msg}}
                            </div>
                            {{/if}}
                        </div>

                        <div class="d-flex justify-content-between gap-2">
                            <a href="/cliente/direcciones" class="btn btn-outline-secondary">
                                Cancelar
                            </a>
                            <button type="submit" class="btn btn-primary">
                                Guardar cambios
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>